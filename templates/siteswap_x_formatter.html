{% extends "macros/base.html" %}

{% block title %}Siteswap X Formatter{% endblock %}

{% block head %}
{{ super() }}
{% endblock %}

{% block content %}
<div class="section">
    <div class="section-container">
        <h1 class="section-title">Siteswap X Formatter</h1>
        <p class="lead">Type a siteswap-x string to see it formatted.</p>
        
        <div class="form-group">
            <label for="siteswap-input">Raw Siteswap X:</label>
            <input type="text" id="siteswap-input" class="form-control" placeholder="e.g. 4{/Rs}23{B}" autocomplete="off" style="font-size: 1.2em; padding: 10px;">
        </div>

        <div class="mt-4">
            <h3>Formatted Result:</h3>
            <div class="trick-container trick-widget" style="display: inline-block; padding: 20px;">
                <div class="trick-main">
                    <span id="formatted-output" class="trick-siteswap-x" style="font-size: 3em;"></span>
                </div>
            </div>
        </div>

        <div class="mt-5 pt-5 border-top" style="margin-top: 50px !important;">
            <h3>Example:</h3>
            <div class="row">
                <div class="col-md-6">
                    <p><strong>Raw:</strong></p>
                    <p><code style="font-size: 1.2em;">4{/Rs}23{B}</code></p>
                </div>
                <div class="col-md-6">
                    <p><strong>Formatted:</strong></p>
                    <div class="trick-container trick-widget" style="display: inline-block; padding: 10px;">
                        <div class="trick-main">
                            <span id="static-example-output" class="trick-siteswap-x" style="font-size: 2em;"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="{{ url_for('static', filename='js/siteswap_x.js') }}"></script>
<script>
    const input = document.getElementById('siteswap-input');
    const output = document.getElementById('formatted-output');
    const staticExampleOutput = document.getElementById('static-example-output');

    function updateFormat() {
        const raw = input.value;
        output.innerHTML = formatSiteswapX(raw);
    }

    input.addEventListener('input', updateFormat);
    
    // Initial call
    updateFormat();

    // Render static example
    if (staticExampleOutput) {
        staticExampleOutput.innerHTML = formatSiteswapX('4{/Rs}23{B}');
    }
</script>
{% endblock %}
